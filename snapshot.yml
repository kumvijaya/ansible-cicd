- name: TAKE A SNAPSHOT OF THE DEVICE
  hosts: testhost
  tasks:
    - name: Print all Facts
      ansible.builtin.debug:
        var: ansible_facts

    - name: Get configuration and state outputs
      cisco.ios.ios_command:
        commands:
          - show run
          - show inventory
      register: entire_output

    - debug:
        var: entire_output

    - name: Save output file name
      copy:
        content: "{{ ansible_facts['net_hostname'] }}"
        dest: ./host_out.txt
    
    - name: Save output content
      copy:
        content: '{{ entire_output.stdout }}'
        dest: ./{{ ansible_facts['net_hostname'] }}